import { Dispatch, SetStateAction, useEffect } from "react";

export const ThemeSwitcher = ({
  theme,
  setTheme,
}: {
  theme: "light" | "dark";
  setTheme: Dispatch<SetStateAction<"light" | "dark">>;
}) => {
  useEffect(() => {
    if (typeof window === "undefined") return;

    const localTheme = localStorage.getItem("theme");

    if (!localTheme) return;

    const isAvailableTheme = localTheme === "dark" || localTheme === "light";

    if (!isAvailableTheme) return;

    setTheme(localTheme);
  }, [setTheme]);

  useEffect(() => {
    // check for LGPD
    localStorage.setItem("theme", theme);

    if (theme === "dark") {
      document.body.classList.add("dark");
    } else {
      document.body.classList.remove("dark");
    }
  }, [theme]);

  return (
    <button
      onClick={() => {
        setTheme((theme) => (theme === "dark" ? "light" : "dark"));
      }}
      className="flex rounded-full bg-gray-900 p-2 dark:bg-gray-200"
    >
      <svg
        width="36"
        height="37"
        viewBox="0 0 36 37"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
        className="dark:hidden"
      >
        <path
          d="M35.5889 21.5665C35.4078 21.385 35.1807 21.2562 34.9319 21.194C34.6832 21.1318 34.4222 21.1385 34.1769 21.2135C31.4846 22.0276 28.6218 22.0958 25.8937 21.411C23.1656 20.7261 20.6744 19.3138 18.6855 17.3245C16.6966 15.3352 15.2846 12.8434 14.5999 10.1148C13.9151 7.38612 13.9834 4.52277 14.7973 1.82985C14.8729 1.58447 14.8801 1.32313 14.8182 1.07394C14.7564 0.824759 14.6278 0.597152 14.4463 0.415602C14.2648 0.234052 14.0372 0.105428 13.7881 0.0435636C13.5389 -0.0183012 13.2777 -0.011066 13.0323 0.0644907C9.31 1.20499 6.04214 3.49068 3.69375 6.59631C1.64003 9.32354 0.387309 12.5695 0.076336 15.9696C-0.234637 19.3697 0.408454 22.7891 1.93336 25.8438C3.45827 28.8985 5.80458 31.4673 8.70868 33.2617C11.6128 35.0562 14.9596 36.0051 18.3732 36.0019C22.3556 36.0141 26.2321 34.7192 29.4079 32.3158C32.5129 29.9669 34.7981 26.6984 35.9384 22.9753C36.0131 22.7308 36.02 22.4707 35.9584 22.2226C35.8969 21.9745 35.7692 21.7477 35.5889 21.5665ZM27.71 30.0597C24.7193 32.3127 21.0156 33.4094 17.2806 33.1478C13.5456 32.8862 10.0308 31.284 7.38318 28.6361C4.73558 25.9881 3.13339 22.4727 2.87156 18.737C2.60974 15.0013 3.70589 11.2967 5.95824 8.30518C7.42566 6.36692 9.32278 4.79573 11.5003 3.71525C11.3763 4.58597 11.3137 5.46435 11.3132 6.34387C11.3184 11.2116 13.2539 15.8785 16.6952 19.3205C20.1365 22.7625 24.8024 24.6984 29.6691 24.7036C30.5502 24.7033 31.4302 24.6408 32.3025 24.5165C31.2212 26.6948 29.6491 28.5924 27.71 30.0597Z"
          fill="#FFC44C"
        />
      </svg>

      <svg
        width="36"
        height="37"
        viewBox="0 0 36 37"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
        className="hidden dark:block"
      >
        <path
          d="M16.8 31.202V34.802C16.8 35.1202 16.9264 35.4254 17.1515 35.6505C17.3765 35.8755 17.6817 36.002 18 36.002C18.3183 36.002 18.6235 35.8755 18.8485 35.6505C19.0736 35.4254 19.2 35.1202 19.2 34.802V31.202C19.2 30.8837 19.0736 30.5785 18.8485 30.3534C18.6235 30.1284 18.3183 30.002 18 30.002C17.6817 30.002 17.3765 30.1284 17.1515 30.3534C16.9264 30.5785 16.8 30.8837 16.8 31.202ZM27.6 18.002C27.6 16.1033 27.037 14.2472 25.9821 12.6685C24.9272 11.0898 23.4279 9.85931 21.6738 9.13271C19.9196 8.40611 17.9894 8.21599 16.1271 8.58641C14.2649 8.95683 12.5544 9.87114 11.2118 11.2137C9.86919 12.5563 8.95488 14.2669 8.58446 16.1291C8.21404 17.9913 8.40416 19.9215 9.13076 21.6757C9.85736 23.4299 11.0878 24.9292 12.6665 25.9841C14.2452 27.0389 16.1013 27.602 18 27.602C20.5452 27.5992 22.9854 26.5869 24.7852 24.7871C26.5849 22.9874 27.5972 20.5472 27.6 18.002ZM25.2 18.002C25.2 19.426 24.7777 20.818 23.9866 22.0021C23.1954 23.1861 22.0709 24.1089 20.7553 24.6539C19.4397 25.1988 17.992 25.3414 16.5954 25.0636C15.1987 24.7858 13.9158 24.1001 12.9088 23.0931C11.9019 22.0862 11.2162 20.8033 10.9383 19.4066C10.6605 18.0099 10.8031 16.5623 11.3481 15.2466C11.893 13.931 12.8159 12.8065 13.9999 12.0154C15.1839 11.2242 16.576 10.802 18 10.802C19.909 10.8039 21.7391 11.5631 23.089 12.913C24.4388 14.2628 25.198 16.093 25.2 18.002ZM7.551 26.753C7.77617 26.5278 8.08156 26.4013 8.4 26.4013C8.71844 26.4013 9.02383 26.5278 9.249 26.753C9.47417 26.9781 9.60067 27.2835 9.60067 27.602C9.60067 27.9204 9.47417 28.2258 9.249 28.451L6.849 30.851C6.62383 31.0761 6.31844 31.2026 6 31.2026C5.68156 31.2026 5.37617 31.0761 5.151 30.851C4.92583 30.6258 4.79933 30.3204 4.79933 30.002C4.79933 29.6835 4.92583 29.3781 5.151 29.153L7.551 26.753ZM7.551 9.25095L5.151 6.85095C4.92583 6.62578 4.79933 6.32039 4.79933 6.00195C4.79933 5.68352 4.92583 5.37812 5.151 5.15295C5.37617 4.92778 5.68156 4.80128 6 4.80128C6.31844 4.80128 6.62383 4.92778 6.849 5.15295L9.249 7.55295C9.36049 7.66444 9.44893 7.7968 9.50927 7.94248C9.56961 8.08815 9.60067 8.24428 9.60067 8.40195C9.60067 8.55963 9.56961 8.71576 9.50927 8.86143C9.44893 9.0071 9.36049 9.13946 9.249 9.25095C9.13751 9.36244 9.00515 9.45088 8.85948 9.51122C8.7138 9.57156 8.55767 9.60262 8.4 9.60262C8.24233 9.60262 8.0862 9.57156 7.94052 9.51122C7.79485 9.45088 7.66249 9.36244 7.551 9.25095ZM27.6 26.402C27.7576 26.4018 27.9137 26.4328 28.0594 26.493C28.2051 26.5532 28.3375 26.6416 28.449 26.753L30.849 29.153C31.0742 29.3781 31.2007 29.6835 31.2007 30.002C31.2007 30.3204 31.0742 30.6258 30.849 30.851C30.6238 31.0761 30.3184 31.2026 30 31.2026C29.6816 31.2026 29.3762 31.0761 29.151 30.851L26.751 28.451C26.583 28.2831 26.4685 28.0692 26.4222 27.8363C26.3758 27.6034 26.3996 27.362 26.4905 27.1426C26.5814 26.9232 26.7353 26.7357 26.9328 26.6039C27.1303 26.472 27.3625 26.4018 27.6 26.402ZM28.449 9.25095C28.2238 9.47612 27.9184 9.60262 27.6 9.60262C27.2816 9.60262 26.9762 9.47612 26.751 9.25095C26.5258 9.02578 26.3993 8.72039 26.3993 8.40195C26.3993 8.08352 26.5258 7.77812 26.751 7.55295L29.151 5.15295C29.2625 5.04146 29.3949 4.95302 29.5405 4.89268C29.6862 4.83234 29.8423 4.80128 30 4.80128C30.1577 4.80128 30.3138 4.83234 30.4595 4.89268C30.6051 4.95302 30.7375 5.04146 30.849 5.15295C30.9605 5.26444 31.0489 5.3968 31.1093 5.54248C31.1696 5.68815 31.2007 5.84428 31.2007 6.00195C31.2007 6.15963 31.1696 6.31576 31.1093 6.46143C31.0489 6.6071 30.9605 6.73946 30.849 6.85095L28.449 9.25095ZM6 18.002C6 18.3202 5.87357 18.6254 5.64853 18.8505C5.42348 19.0755 5.11826 19.202 4.8 19.202H1.2C0.88174 19.202 0.576515 19.0755 0.351472 18.8505C0.126428 18.6254 0 18.3202 0 18.002C0 17.6837 0.126428 17.3785 0.351472 17.1534C0.576515 16.9284 0.88174 16.802 1.2 16.802H4.8C5.11826 16.802 5.42348 16.9284 5.64853 17.1534C5.87357 17.3785 6 17.6837 6 18.002ZM18 6.00195C17.6817 6.00195 17.3765 5.87552 17.1515 5.65048C16.9264 5.42544 16.8 5.12021 16.8 4.80195V1.20195C16.8 0.883692 16.9264 0.578466 17.1515 0.353423C17.3765 0.128379 17.6817 0.00195169 18 0.00195169C18.3183 0.00195169 18.6235 0.128379 18.8485 0.353423C19.0736 0.578466 19.2 0.883692 19.2 1.20195V4.80195C19.2 5.12021 19.0736 5.42544 18.8485 5.65048C18.6235 5.87552 18.3183 6.00195 18 6.00195ZM34.8 19.202H31.2C30.8817 19.202 30.5765 19.0755 30.3515 18.8505C30.1264 18.6254 30 18.3202 30 18.002C30 17.6837 30.1264 17.3785 30.3515 17.1534C30.5765 16.9284 30.8817 16.802 31.2 16.802H34.8C35.1183 16.802 35.4235 16.9284 35.6485 17.1534C35.8736 17.3785 36 17.6837 36 18.002C36 18.3202 35.8736 18.6254 35.6485 18.8505C35.4235 19.0755 35.1183 19.202 34.8 19.202Z"
          fill="#FFC44C"
        />
      </svg>
    </button>
  );
};
